\hypertarget{main_8cpp}{}\doxysection{main.\+cpp File Reference}
\label{main_8cpp}\index{main.cpp@{main.cpp}}
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include $<$arpa/inet.\+h$>$}\newline
{\ttfamily \#include $<$netdb.\+h$>$}\newline
{\ttfamily \#include $<$sys/socket.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$unistd.\+h$>$}\newline
{\ttfamily \#include \char`\"{}json.\+hpp\char`\"{}}\newline
{\ttfamily \#include \char`\"{}BPGame\+Logic.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}tinyxml2.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gen\+Logic.\+h\char`\"{}}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include \char`\"{}GAPad.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}GASolver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}divide\+Image.\+h\char`\"{}}\newline
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{main_8cpp_ab701e3ac61a85b337ec5c1abaad6742d}{json}} = \mbox{\hyperlink{namespacenlohmann_a2bfd99e845a2e5cd90aeaf1b1431f474}{nlohmann\+::json}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{main_8cpp_a0544f8cc1cac41dde16aab35b1183c7d}{Start\+Listenign}} ()
\item 
int \mbox{\hyperlink{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{main_8cpp_a8b2d3995161eb62b836776ef0d311046}{MUTATION\+\_\+\+CHANCE}} = 0.\+9
\item 
float \mbox{\hyperlink{main_8cpp_adb7b8767ce8e5e2039660af73bca99ee}{CROSS\+\_\+\+OVER\+\_\+\+RATE}} = 0.\+3
\item 
int \mbox{\hyperlink{main_8cpp_aaedcc0e752bf812bfc936dadd6fb5eff}{POPULATION\+\_\+\+LEN}} = 1000
\item 
int \mbox{\hyperlink{main_8cpp_add18cf1b3d789763919a27550f5980a0}{MAX\+\_\+\+ITERATION}} = 100
\end{DoxyCompactItemize}


\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{main_8cpp_ab701e3ac61a85b337ec5c1abaad6742d}\label{main_8cpp_ab701e3ac61a85b337ec5c1abaad6742d}} 
\index{main.cpp@{main.cpp}!json@{json}}
\index{json@{json}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{json}{json}}
{\footnotesize\ttfamily using \mbox{\hyperlink{genLogic_8h_ab701e3ac61a85b337ec5c1abaad6742d}{json}} =  \mbox{\hyperlink{namespacenlohmann_a2bfd99e845a2e5cd90aeaf1b1431f474}{nlohmann\+::json}}}



Definition at line 29 of file main.\+cpp.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}\label{main_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}} 
\index{main.cpp@{main.cpp}!main@{main}}
\index{main@{main}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 102 of file main.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{102            \{}
\DoxyCodeLine{103     srand(time(NULL));}
\DoxyCodeLine{104     \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{105 }
\DoxyCodeLine{106         \mbox{\hyperlink{classGAPad}{GAPad}} myPad = \mbox{\hyperlink{classGAPad}{GAPad}}(3, 3);}
\DoxyCodeLine{107         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&item : myPad.\mbox{\hyperlink{classGAPad_ac329937dcebceccf93a326f8ab49a06f}{board}}) \{}
\DoxyCodeLine{108             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&i : item) \{}
\DoxyCodeLine{109 }
\DoxyCodeLine{110                 cout << setw(3)<< i <<\textcolor{stringliteral}{"{} ; "{}};}
\DoxyCodeLine{111             \}}
\DoxyCodeLine{112             cout << endl;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114         cout << endl;}
\DoxyCodeLine{115         myPad.\mbox{\hyperlink{classGAPad_ad71aaea96ad0bd0675234a2d60fb961a}{shuffle}}();}
\DoxyCodeLine{116         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&item : myPad.\mbox{\hyperlink{classGAPad_ac329937dcebceccf93a326f8ab49a06f}{board}}) \{}
\DoxyCodeLine{117             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&i : item) \{}
\DoxyCodeLine{118 }
\DoxyCodeLine{119 }
\DoxyCodeLine{120                 cout << setw(3) << i << \textcolor{stringliteral}{"{} -\/ "{}};}
\DoxyCodeLine{121             \}}
\DoxyCodeLine{122             cout << endl;}
\DoxyCodeLine{123         \}}
\DoxyCodeLine{124         cout << endl;}
\DoxyCodeLine{125 }
\DoxyCodeLine{126         \mbox{\hyperlink{classList}{List<string>}} gene;}
\DoxyCodeLine{127         \mbox{\hyperlink{classGAChromosome}{GAChromosome}} par = \mbox{\hyperlink{classGAChromosome}{GAChromosome}}(myPad, gene);}
\DoxyCodeLine{128         \mbox{\hyperlink{classGASolver}{GASolver}} gSolver = \mbox{\hyperlink{classGASolver}{GASolver}}(myPad, \mbox{\hyperlink{main_8cpp_aaedcc0e752bf812bfc936dadd6fb5eff}{POPULATION\_LEN}}, \mbox{\hyperlink{main_8cpp_a8b2d3995161eb62b836776ef0d311046}{MUTATION\_CHANCE}}, \mbox{\hyperlink{main_8cpp_adb7b8767ce8e5e2039660af73bca99ee}{CROSS\_OVER\_RATE}}, par);}
\DoxyCodeLine{129         \mbox{\hyperlink{classGAChromosome}{GAChromosome}} res = gSolver.\mbox{\hyperlink{classGASolver_a21329f8b9c65b0041a3a22ee28aef3cd}{solve}}(\mbox{\hyperlink{main_8cpp_add18cf1b3d789763919a27550f5980a0}{MAX\_ITERATION}}, 0.000001);}
\DoxyCodeLine{130         myPad.\mbox{\hyperlink{classGAPad_a1ac8ee3b4f0809c4e8115151abe92a14}{apply\_chain}}(res.\mbox{\hyperlink{classGAChromosome_a58693da80cef37866a75a60571d1f202}{gene}});}
\DoxyCodeLine{131 }
\DoxyCodeLine{132         \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&item : myPad.\mbox{\hyperlink{classGAPad_ac329937dcebceccf93a326f8ab49a06f}{board}}) \{}
\DoxyCodeLine{133             \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&i : item) \{}
\DoxyCodeLine{134 }
\DoxyCodeLine{135                 cout << setw(3)<< i << \textcolor{stringliteral}{"{} | "{}};}
\DoxyCodeLine{136             \}}
\DoxyCodeLine{137             cout << endl;}
\DoxyCodeLine{138         \}}
\DoxyCodeLine{139         cout << endl;}
\DoxyCodeLine{140 }
\DoxyCodeLine{141 }
\DoxyCodeLine{142         cout<< \textcolor{stringliteral}{"{}**************************"{}}<< endl;}
\DoxyCodeLine{143 }
\DoxyCodeLine{144         cout << gSolver.\mbox{\hyperlink{classGASolver_a940f5aa314d2fb295b693864e483cb2d}{getResultPath}}() << endl;}
\DoxyCodeLine{145     \}}
\DoxyCodeLine{146 }
\DoxyCodeLine{147 }
\DoxyCodeLine{148     \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::exception \&exc)\{}
\DoxyCodeLine{149         cout<<\textcolor{stringliteral}{"{}Ha ocurrido un error\(\backslash\)n"{}};}
\DoxyCodeLine{150         std::cerr << exc.what();}
\DoxyCodeLine{151     \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153 }
\DoxyCodeLine{154 }
\DoxyCodeLine{155 \textcolor{comment}{//    List<GAChromosome*> prueba;}}
\DoxyCodeLine{156 \textcolor{comment}{//    GAPad myPad = GAPad();}}
\DoxyCodeLine{157 \textcolor{comment}{//    GAChromosome original = GAChromosome(myPad, \{\});}}
\DoxyCodeLine{158 \textcolor{comment}{//    GAChromosome par = original;}}
\DoxyCodeLine{159 \textcolor{comment}{//    GAChromosome* ptrpar= \&par;}}
\DoxyCodeLine{160 \textcolor{comment}{//    prueba.insertFirst(ptrpar);}}
\DoxyCodeLine{161 }
\DoxyCodeLine{162 \textcolor{comment}{//    StartListenign();}}
\DoxyCodeLine{163 }
\DoxyCodeLine{164 \textcolor{comment}{//    // init vars}}
\DoxyCodeLine{165 \textcolor{comment}{//    const int blockw = 50;}}
\DoxyCodeLine{166 \textcolor{comment}{//    const int blockh = 50;}}
\DoxyCodeLine{167 \textcolor{comment}{//    std::vector<cv::Mat> blocks;}}
\DoxyCodeLine{168 \textcolor{comment}{//}}
\DoxyCodeLine{169 \textcolor{comment}{//    // read png image}}
\DoxyCodeLine{170 \textcolor{comment}{//}}
\DoxyCodeLine{171 \textcolor{comment}{//    cv::Mat image = cv::imread("{}/home/ignacio/Datos2/Lets-\/play/Server/perrito.jpg"{}, cv::IMREAD\_UNCHANGED);}}
\DoxyCodeLine{172 \textcolor{comment}{//    //cv::imshow("{}Display window"{}, image);}}
\DoxyCodeLine{173 \textcolor{comment}{//}}
\DoxyCodeLine{174 \textcolor{comment}{//    // divide image into multiple blocks}}
\DoxyCodeLine{175 \textcolor{comment}{//    int divideStatus = divideImage(image, 9, blocks);}}
\DoxyCodeLine{176 \textcolor{comment}{//}}
\DoxyCodeLine{177 \textcolor{comment}{//    // debug: save blocks}}
\DoxyCodeLine{178 \textcolor{comment}{//    cv::utils::fs::createDirectory("{}/home/usuario/Proyectos/Lets-\/play/Server/blocksFolder"{});}}
\DoxyCodeLine{179 \textcolor{comment}{//    for (int j = 0; j < blocks.size(); j++)}}
\DoxyCodeLine{180 \textcolor{comment}{//    \{}}
\DoxyCodeLine{181 \textcolor{comment}{//        std::string blockId = std::to\_string(j);}}
\DoxyCodeLine{182 \textcolor{comment}{//        std::string blockImgName = "{}/home/usuario/Proyectos/Lets-\/play/Server/blocksFolder/block\#"{} + blockId + "{}.jpg"{};}}
\DoxyCodeLine{183 \textcolor{comment}{//        imwrite(blockImgName, blocks[j]);}}
\DoxyCodeLine{184 \textcolor{comment}{//    \}}}
\DoxyCodeLine{185 }
\DoxyCodeLine{186 }
\DoxyCodeLine{187 }
\DoxyCodeLine{188     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{189 \}}

\end{DoxyCode}
\mbox{\Hypertarget{main_8cpp_a0544f8cc1cac41dde16aab35b1183c7d}\label{main_8cpp_a0544f8cc1cac41dde16aab35b1183c7d}} 
\index{main.cpp@{main.cpp}!StartListenign@{StartListenign}}
\index{StartListenign@{StartListenign}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{StartListenign()}{StartListenign()}}
{\footnotesize\ttfamily int Start\+Listenign (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 32 of file main.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{32                     \{}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keywordtype}{int} listening = socket(AF\_INET, SOCK\_STREAM, 0);}
\DoxyCodeLine{35     \textcolor{keywordflow}{if} (listening == -\/1)}
\DoxyCodeLine{36     \{}
\DoxyCodeLine{37         cerr << \textcolor{stringliteral}{"{}No se pudo crear el Socket. Cerrando..."{}} << endl;}
\DoxyCodeLine{38         \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{39     \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     sockaddr\_in hint;}
\DoxyCodeLine{42     hint.sin\_family = AF\_INET;}
\DoxyCodeLine{43     hint.sin\_port = htons(11000);}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     inet\_pton(AF\_INET, \textcolor{stringliteral}{"{}0.0.0.0"{}}, \&hint.sin\_addr);}
\DoxyCodeLine{46     bind(listening, (sockaddr*)\&hint, \textcolor{keyword}{sizeof}(hint));}
\DoxyCodeLine{47 }
\DoxyCodeLine{48     listen(listening, SOMAXCONN);}
\DoxyCodeLine{49 }
\DoxyCodeLine{50     \textcolor{keywordflow}{while}(\textcolor{keyword}{true})\{}
\DoxyCodeLine{51         sockaddr\_in client;}
\DoxyCodeLine{52         socklen\_t clientSize = \textcolor{keyword}{sizeof}(client);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54         \textcolor{keywordtype}{int} clientSocket = accept(listening, (sockaddr *) \&client, \&clientSize);}
\DoxyCodeLine{55 }
\DoxyCodeLine{56         \textcolor{keywordtype}{char} host[NI\_MAXHOST];      \textcolor{comment}{// Nombre del cliente remoto}}
\DoxyCodeLine{57         \textcolor{keywordtype}{char} service[NI\_MAXSERV];}
\DoxyCodeLine{58 }
\DoxyCodeLine{59         memset(host, 0, NI\_MAXHOST);}
\DoxyCodeLine{60         memset(service, 0, NI\_MAXSERV);}
\DoxyCodeLine{61 }
\DoxyCodeLine{62         \textcolor{keywordflow}{if} (getnameinfo((sockaddr *) \&client, \textcolor{keyword}{sizeof}(client), host, NI\_MAXHOST, service, NI\_MAXSERV, 0) == 0) \{}
\DoxyCodeLine{63             cout << host << \textcolor{stringliteral}{"{} conectado "{}} << endl;}
\DoxyCodeLine{64         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{65             inet\_ntop(AF\_INET, \&client.sin\_addr, host, NI\_MAXHOST);}
\DoxyCodeLine{66             cout << host << \textcolor{stringliteral}{"{} conectado al puerto "{}} << ntohs(client.sin\_port) << endl;}
\DoxyCodeLine{67         \}}
\DoxyCodeLine{68         \textcolor{keywordtype}{char} buf[4096];}
\DoxyCodeLine{69         memset(buf, 0, 4096);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71         \textcolor{keywordtype}{int} bytesReceived = recv(clientSocket, buf, 4096, 0);}
\DoxyCodeLine{72         \textcolor{keywordflow}{if} (bytesReceived == -\/1) \{}
\DoxyCodeLine{73             cerr << \textcolor{stringliteral}{"{}Error al recibir mensaje. Cerrando..."{}} << endl;}
\DoxyCodeLine{74             \textcolor{keywordflow}{break};}
\DoxyCodeLine{75         \}}
\DoxyCodeLine{76 }
\DoxyCodeLine{77         \textcolor{keywordflow}{if} (bytesReceived == 0) \{}
\DoxyCodeLine{78             cout << \textcolor{stringliteral}{"{}Cliente desconectado "{}} << endl;}
\DoxyCodeLine{79             \textcolor{keywordflow}{break};}
\DoxyCodeLine{80         \}}
\DoxyCodeLine{81 }
\DoxyCodeLine{82         \textcolor{keywordtype}{string} messageR = \mbox{\hyperlink{namespacenlohmann_1_1detail_a1ed8fc6239da25abcaf681d30ace4985ab45cffe084dd3d20d928bee85e7b0f21}{string}}(buf, 0, bytesReceived);}
\DoxyCodeLine{83         \mbox{\hyperlink{classnlohmann_1_1basic__json}{json}} jmessageR = \mbox{\hyperlink{classnlohmann_1_1basic__json_a15018ade392a844ea32d5188d1a0b9c6}{json::parse}}(messageR);}
\DoxyCodeLine{84         \textcolor{keywordtype}{string} game = jmessageR.\mbox{\hyperlink{classnlohmann_1_1basic__json_a11641b35219676b225d9bd15c7677659}{value}}(\textcolor{stringliteral}{"{}Game"{}}, \textcolor{stringliteral}{"{}oops"{}});}
\DoxyCodeLine{85         \textcolor{keywordflow}{if} (game == \textcolor{stringliteral}{"{}BP"{}})\{}
\DoxyCodeLine{86             \textcolor{keywordtype}{string} message = \mbox{\hyperlink{BPGameLogic_8h_a1657e726a132e4f0d82fb2264f11716f}{bpLogic}}(jmessageR);}
\DoxyCodeLine{87             send(clientSocket, message.c\_str(), message.size() + 1, 0);}
\DoxyCodeLine{88         \}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90         \textcolor{keywordflow}{if} (game == \textcolor{stringliteral}{"{}Genetic"{}})}
\DoxyCodeLine{91         \{}
\DoxyCodeLine{92             \textcolor{keywordtype}{string} message = \mbox{\hyperlink{genLogic_8h_a686bafe9957b8fc49bb79d58042801dc}{genLogic}}(jmessageR);}
\DoxyCodeLine{93             send(clientSocket, message.c\_str(), message.size() + 1, 0);}
\DoxyCodeLine{94         \}}
\DoxyCodeLine{95         close(clientSocket);}
\DoxyCodeLine{96     \}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{99 \}}

\end{DoxyCode}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{main_8cpp_adb7b8767ce8e5e2039660af73bca99ee}\label{main_8cpp_adb7b8767ce8e5e2039660af73bca99ee}} 
\index{main.cpp@{main.cpp}!CROSS\_OVER\_RATE@{CROSS\_OVER\_RATE}}
\index{CROSS\_OVER\_RATE@{CROSS\_OVER\_RATE}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{CROSS\_OVER\_RATE}{CROSS\_OVER\_RATE}}
{\footnotesize\ttfamily float CROSS\+\_\+\+OVER\+\_\+\+RATE = 0.\+3}



Definition at line 22 of file main.\+cpp.

\mbox{\Hypertarget{main_8cpp_add18cf1b3d789763919a27550f5980a0}\label{main_8cpp_add18cf1b3d789763919a27550f5980a0}} 
\index{main.cpp@{main.cpp}!MAX\_ITERATION@{MAX\_ITERATION}}
\index{MAX\_ITERATION@{MAX\_ITERATION}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{MAX\_ITERATION}{MAX\_ITERATION}}
{\footnotesize\ttfamily int MAX\+\_\+\+ITERATION = 100}



Definition at line 24 of file main.\+cpp.

\mbox{\Hypertarget{main_8cpp_a8b2d3995161eb62b836776ef0d311046}\label{main_8cpp_a8b2d3995161eb62b836776ef0d311046}} 
\index{main.cpp@{main.cpp}!MUTATION\_CHANCE@{MUTATION\_CHANCE}}
\index{MUTATION\_CHANCE@{MUTATION\_CHANCE}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{MUTATION\_CHANCE}{MUTATION\_CHANCE}}
{\footnotesize\ttfamily float MUTATION\+\_\+\+CHANCE = 0.\+9}



Definition at line 21 of file main.\+cpp.

\mbox{\Hypertarget{main_8cpp_aaedcc0e752bf812bfc936dadd6fb5eff}\label{main_8cpp_aaedcc0e752bf812bfc936dadd6fb5eff}} 
\index{main.cpp@{main.cpp}!POPULATION\_LEN@{POPULATION\_LEN}}
\index{POPULATION\_LEN@{POPULATION\_LEN}!main.cpp@{main.cpp}}
\doxysubsubsection{\texorpdfstring{POPULATION\_LEN}{POPULATION\_LEN}}
{\footnotesize\ttfamily int POPULATION\+\_\+\+LEN = 1000}



Definition at line 23 of file main.\+cpp.

